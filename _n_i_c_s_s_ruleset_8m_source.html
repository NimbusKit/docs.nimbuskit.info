<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nimbus: src/css/src/NICSSRuleset.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24278774-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="page">
<div style="position:relative">
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<a style="float: right;margin-right:20px;margin-top:20px" href='http://www.pledgie.com/campaigns/15519'><img alt='Click here to support Nimbus development and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/15519.png?skin_name=chrome' border='0' /></a>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nimbus
   &#160;<span id="projectnumber">0.9.3 - <a href="http://github.com/jverkoey/nimbus">Nimbus is proudly hosted on Github</a></span>
   </div>
   <div id="projectbrief">An iOS framework whose growth is bounded by O(documentation).</div>
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4-20110629 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_n_i_c_s_s_ruleset_8m.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">src/css/src/NICSSRuleset.m</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright 2011 Jeff Verkoeyen</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00005"></a>00005 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">//    http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00011"></a>00011 <span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00012"></a>00012 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00013"></a>00013 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00014"></a>00014 <span class="comment">// limitations under the License.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#import &quot;NICSSRuleset.h&quot;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#import &quot;NICSSParser.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#import &quot;NimbusCore.h&quot;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kTextColorKey = <span class="stringliteral">@&quot;color&quot;</span>;
<a name="l00023"></a>00023 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kTextAlignmentKey = <span class="stringliteral">@&quot;text-align&quot;</span>;
<a name="l00024"></a>00024 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kFontKey = <span class="stringliteral">@&quot;font&quot;</span>;
<a name="l00025"></a>00025 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kFontSizeKey = <span class="stringliteral">@&quot;font-size&quot;</span>;
<a name="l00026"></a>00026 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kFontStyleKey = <span class="stringliteral">@&quot;font-style&quot;</span>;
<a name="l00027"></a>00027 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kFontWeightKey = <span class="stringliteral">@&quot;font-weight&quot;</span>;
<a name="l00028"></a>00028 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kFontFamilyKey = <span class="stringliteral">@&quot;font-family&quot;</span>;
<a name="l00029"></a>00029 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kTextShadowKey = <span class="stringliteral">@&quot;text-shadow&quot;</span>;
<a name="l00030"></a>00030 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kLineBreakModeKey = <span class="stringliteral">@&quot;-ios-line-break-mode&quot;</span>;
<a name="l00031"></a>00031 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kNumberOfLinesKey = <span class="stringliteral">@&quot;-ios-number-of-lines&quot;</span>;
<a name="l00032"></a>00032 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kMinimumFontSizeKey = <span class="stringliteral">@&quot;-ios-minimum-font-size&quot;</span>;
<a name="l00033"></a>00033 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kAdjustsFontSizeKey = <span class="stringliteral">@&quot;-ios-adjusts-font-size&quot;</span>;
<a name="l00034"></a>00034 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBaselineAdjustmentKey = <span class="stringliteral">@&quot;-ios-baseline-adjustment&quot;</span>;
<a name="l00035"></a>00035 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kOpacityKey = <span class="stringliteral">@&quot;opacity&quot;</span>;
<a name="l00036"></a>00036 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBackgroundColorKey = <span class="stringliteral">@&quot;background-color&quot;</span>;
<a name="l00037"></a>00037 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBorderRadiusKey = <span class="stringliteral">@&quot;border-radius&quot;</span>;
<a name="l00038"></a>00038 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBorderKey = <span class="stringliteral">@&quot;border&quot;</span>;
<a name="l00039"></a>00039 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBorderColorKey = <span class="stringliteral">@&quot;border-color&quot;</span>;
<a name="l00040"></a>00040 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kBorderWidthKey = <span class="stringliteral">@&quot;border-width&quot;</span>;
<a name="l00041"></a>00041 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kTintColorKey = <span class="stringliteral">@&quot;-ios-tint-color&quot;</span>;
<a name="l00042"></a>00042 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kActivityIndicatorStyleKey = <span class="stringliteral">@&quot;-ios-activity-indicator-style&quot;</span>;
<a name="l00043"></a>00043 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kAutoresizingKey = <span class="stringliteral">@&quot;-ios-autoresizing&quot;</span>;
<a name="l00044"></a>00044 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kTableViewCellSeparatorStyleKey = <span class="stringliteral">@&quot;-ios-table-view-cell-separator-style&quot;</span>;
<a name="l00045"></a>00045 <span class="keyword">static</span> <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* <span class="keyword">const</span> kScrollViewIndicatorStyleKey = <span class="stringliteral">@&quot;-ios-scroll-view-indicator-style&quot;</span>;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">// This color table is generated on-demand and is released when a memory warning is encountered.</span>
<a name="l00048"></a>00048 <span class="keyword">static</span> NSDictionary* sColorTable = nil;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="keyword">@interface </span><a class="code" href="interface_n_i_c_s_s_ruleset.html" title="A simple translator from raw CSS rulesets to Objective-C values.">NICSSRuleset</a>()
<a name="l00051"></a>00051 <span class="comment">// Instantiates the color table if it does not already exist.</span>
<a name="l00052"></a>00052 + (NSDictionary *)colorTable;
<a name="l00053"></a>00053 + (UIColor *)colorFromCssValues:(NSArray *)cssValues numberOfConsumedTokens:(NSInteger *)pNumberOfConsumedTokens;
<a name="l00054"></a>00054 + (UITextAlignment)textAlignmentFromCssValues:(NSArray *)cssValues;
<a name="l00055"></a>00055 <span class="keyword">@end</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00061"></a>00061 <span class="keyword">@implementation </span><a class="code" href="interface_n_i_c_s_s_ruleset.html" title="A simple translator from raw CSS rulesets to Objective-C values.">NICSSRuleset</a>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00065"></a>00065 - (void)clearCache {
<a name="l00066"></a>00066   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_textColor);
<a name="l00067"></a>00067   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_font);
<a name="l00068"></a>00068   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_textShadowColor);
<a name="l00069"></a>00069   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_backgroundColor);
<a name="l00070"></a>00070   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_borderColor);
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00075"></a>00075 - (void)dealloc {
<a name="l00076"></a>00076   [[NSNotificationCenter defaultCenter] removeObserver:self];
<a name="l00077"></a>00077   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_ruleset);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   [<span class="keyword">self</span> clearCache];
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   [<span class="keyword">super</span> dealloc];
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00086"></a>00086 - (id)init {
<a name="l00087"></a>00087   <span class="keywordflow">if</span> ((<span class="keyword">self</span> = [super init])) {
<a name="l00088"></a>00088     _ruleset = [[NSMutableDictionary alloc] init];
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     NSNotificationCenter* nc = [NSNotificationCenter defaultCenter];
<a name="l00091"></a>00091     [nc addObserver: self
<a name="l00092"></a>00092            selector: @selector(didReceiveMemoryWarning:)
<a name="l00093"></a>00093                name: UIApplicationDidReceiveMemoryWarningNotification
<a name="l00094"></a>00094              object: nil];
<a name="l00095"></a>00095   }
<a name="l00096"></a>00096   <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00102"></a>00102 <span class="preprocessor">#pragma mark - Public Methods</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a>00104 
<a name="l00106"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a7918f250ef12324a3e227cb02bbfedf4">00106</a> - (void)addEntriesFromDictionary:(NSDictionary *)dictionary {
<a name="l00107"></a>00107   NSMutableArray* order = [[[_ruleset objectForKey:kPropertyOrderKey] retain] autorelease];
<a name="l00108"></a>00108   [_ruleset addEntriesFromDictionary:dictionary];
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <span class="keywordflow">if</span> (nil != order) {
<a name="l00111"></a>00111     [order addObjectsFromArray:[dictionary objectForKey:kPropertyOrderKey]];
<a name="l00112"></a>00112     [_ruleset setObject:order forKey:kPropertyOrderKey];
<a name="l00113"></a>00113   }
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00118"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a8bcb78257ff8311b9cf858aec5ed49c2">00118</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a8bcb78257ff8311b9cf858aec5ed49c2" title="Returns YES if the ruleset has a &#39;color&#39; property.">hasTextColor</a> {
<a name="l00119"></a>00119   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTextColorKey];
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 
<a name="l00124"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a864739605c7f5ba72ae1a762e7283435">00124</a> - (UIColor *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a864739605c7f5ba72ae1a762e7283435" title="Returns the text color.">textColor</a> {
<a name="l00125"></a>00125   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a8bcb78257ff8311b9cf858aec5ed49c2" title="Returns YES if the ruleset has a &#39;color&#39; property.">hasTextColor</a>]);
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (!_is.cached.TextColor) {
<a name="l00127"></a>00127     _textColor = [[[<span class="keyword">self</span> class] colorFromCssValues:[_ruleset objectForKey:kTextColorKey]
<a name="l00128"></a>00128                             numberOfConsumedTokens:nil] retain];
<a name="l00129"></a>00129     _is.cached.TextColor = YES;
<a name="l00130"></a>00130   }
<a name="l00131"></a>00131   <span class="keywordflow">return</span> _textColor;
<a name="l00132"></a>00132 }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 
<a name="l00136"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#afc44d46c26cfed01a55a2be897c246eb">00136</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#afc44d46c26cfed01a55a2be897c246eb" title="Returns YES if the ruleset has a &#39;text-align&#39; property.">hasTextAlignment</a> {
<a name="l00137"></a>00137   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTextAlignmentKey];
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 
<a name="l00142"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ae1e73ede4e4642d665d4375f2ffa83d5">00142</a> - (UITextAlignment)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ae1e73ede4e4642d665d4375f2ffa83d5" title="Returns the text alignment.">textAlignment</a> {
<a name="l00143"></a>00143   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#afc44d46c26cfed01a55a2be897c246eb" title="Returns YES if the ruleset has a &#39;text-align&#39; property.">hasTextAlignment</a>]);
<a name="l00144"></a>00144   <span class="keywordflow">if</span> (!_is.cached.TextAlignment) {
<a name="l00145"></a>00145     _textAlignment = [[<span class="keyword">self</span> class] textAlignmentFromCssValues:[_ruleset objectForKey:kTextAlignmentKey]];
<a name="l00146"></a>00146     _is.cached.TextAlignment = YES;
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148   <span class="keywordflow">return</span> _textAlignment;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 
<a name="l00153"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a43026e9c8cf7c1f420c653b74f3943ad">00153</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a43026e9c8cf7c1f420c653b74f3943ad" title="Returns YES if the ruleset has a value for any of the following properties: font, font-family...">hasFont</a> {
<a name="l00154"></a>00154   <span class="keywordflow">return</span> (nil != [_ruleset objectForKey:kFontKey]
<a name="l00155"></a>00155           || nil != [_ruleset objectForKey:kFontSizeKey]
<a name="l00156"></a>00156           || nil != [_ruleset objectForKey:kFontWeightKey]
<a name="l00157"></a>00157           || nil != [_ruleset objectForKey:kFontStyleKey]
<a name="l00158"></a>00158           || nil != [_ruleset objectForKey:kFontFamilyKey]);
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 
<a name="l00163"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725">00163</a> - (UIFont *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> {
<a name="l00164"></a>00164   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a43026e9c8cf7c1f420c653b74f3943ad" title="Returns YES if the ruleset has a value for any of the following properties: font, font-family...">hasFont</a>]);
<a name="l00165"></a>00165   
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (_is.cached.Font) {
<a name="l00167"></a>00167     <span class="keywordflow">return</span> _font;
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* fontName = nil;
<a name="l00171"></a>00171   CGFloat fontSize = [UIFont systemFontSize];
<a name="l00172"></a>00172   BOOL fontIsBold = NO;
<a name="l00173"></a>00173   BOOL fontIsItalic = NO;
<a name="l00174"></a>00174   
<a name="l00175"></a>00175   NSArray* values = [_ruleset objectForKey:kFontWeightKey];
<a name="l00176"></a>00176   <span class="keywordflow">if</span> (nil != values) {
<a name="l00177"></a>00177     NIDASSERT([values count] == 1);
<a name="l00178"></a>00178     fontIsBold = [[values objectAtIndex:0] isEqualToString:@&quot;bold&quot;];
<a name="l00179"></a>00179   }
<a name="l00180"></a>00180   
<a name="l00181"></a>00181   values = [_ruleset objectForKey:kFontStyleKey];
<a name="l00182"></a>00182   <span class="keywordflow">if</span> (nil != values) {
<a name="l00183"></a>00183     NIDASSERT([values count] == 1);
<a name="l00184"></a>00184     fontIsItalic = [[values objectAtIndex:0] isEqualToString:@&quot;italic&quot;];
<a name="l00185"></a>00185   }
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   <span class="comment">// There are two ways to set font size and family: font and font-size/font-family.</span>
<a name="l00188"></a>00188   <span class="comment">// Newer definitions of these values should overwrite previous definitions so we must</span>
<a name="l00189"></a>00189   <span class="comment">// respect ordering here.</span>
<a name="l00190"></a>00190   BOOL hasSetFontName = NO;
<a name="l00191"></a>00191   BOOL hasSetFontSize = NO;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   NSArray* order = [_ruleset objectForKey:kPropertyOrderKey];
<a name="l00194"></a>00194   <span class="keywordflow">for</span> (<a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* name in [order reverseObjectEnumerator]) {
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (!hasSetFontName &amp;&amp; [name isEqualToString:kFontFamilyKey]) {
<a name="l00196"></a>00196       values = [_ruleset objectForKey:name];
<a name="l00197"></a>00197       NIDASSERT([values count] == 1); <span class="keywordflow">if</span> ([values count] &lt; 1) { <span class="keywordflow">continue</span>; }
<a name="l00198"></a>00198       fontName = [[values objectAtIndex:0] stringByTrimmingCharactersInSet:
<a name="l00199"></a>00199                   [NSCharacterSet characterSetWithCharactersInString:@&quot;\&quot;&quot;]];
<a name="l00200"></a>00200       hasSetFontName = YES;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasSetFontSize &amp;&amp; [name isEqualToString:kFontSizeKey]) {
<a name="l00203"></a>00203       values = [_ruleset objectForKey:name];
<a name="l00204"></a>00204       NIDASSERT([values count] == 1); <span class="keywordflow">if</span> ([values count] &lt; 1) { <span class="keywordflow">continue</span>; }
<a name="l00205"></a>00205       <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00206"></a>00206       <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;default&quot;</span>]) {
<a name="l00207"></a>00207         fontSize = [UIFont systemFontSize];
<a name="l00208"></a>00208 
<a name="l00209"></a>00209       } <span class="keywordflow">else</span> {
<a name="l00210"></a>00210         fontSize = [value floatValue];
<a name="l00211"></a>00211       }
<a name="l00212"></a>00212       hasSetFontSize = YES;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasSetFontSize &amp;&amp; !hasSetFontName &amp;&amp; [name isEqualToString:kFontKey]) {
<a name="l00215"></a>00215       values = [_ruleset objectForKey:name];
<a name="l00216"></a>00216       NIDASSERT([values count] &lt;= 2); <span class="keywordflow">if</span> ([values count] &lt; 1) { <span class="keywordflow">continue</span>; }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218       <span class="keywordflow">if</span> ([values count] &gt;= 1) {
<a name="l00219"></a>00219         <span class="comment">// Font size</span>
<a name="l00220"></a>00220         fontSize = [[values objectAtIndex:0] floatValue];
<a name="l00221"></a>00221         hasSetFontSize = YES;
<a name="l00222"></a>00222       }
<a name="l00223"></a>00223       <span class="keywordflow">if</span> ([values count] &gt;= 2) {
<a name="l00224"></a>00224         <span class="comment">// Font name</span>
<a name="l00225"></a>00225         fontName = [[values objectAtIndex:1] stringByTrimmingCharactersInSet:
<a name="l00226"></a>00226                     [NSCharacterSet characterSetWithCharactersInString:@&quot;\&quot;&quot;]];
<a name="l00227"></a>00227         hasSetFontName = YES;
<a name="l00228"></a>00228       }
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (hasSetFontName &amp;&amp; hasSetFontSize) {
<a name="l00232"></a>00232       <span class="comment">// Once we&#39;ve set all values then we can ignore any previous values.</span>
<a name="l00233"></a>00233       <span class="keywordflow">break</span>;
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236   
<a name="l00237"></a>00237   UIFont* <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = nil;
<a name="l00238"></a>00238   <span class="keywordflow">if</span> (hasSetFontName) {
<a name="l00239"></a>00239     <span class="comment">// If you wish to set the weight and style for a non-standard font family then you will need</span>
<a name="l00240"></a>00240     <span class="comment">// to set the font family to the given style manually.</span>
<a name="l00241"></a>00241     NIDASSERT(!fontIsItalic &amp;&amp; !fontIsBold);
<a name="l00242"></a>00242     <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = [UIFont fontWithName:fontName size:fontSize];
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fontIsItalic &amp;&amp; fontIsBold) {
<a name="l00245"></a>00245     <span class="comment">// There is no easy way to create a bold italic font using the exposed UIFont methods.</span>
<a name="l00246"></a>00246     <span class="comment">// Please consider using the exact font name instead. E.g. font-name: Helvetica-BoldObliquei</span>
<a name="l00247"></a>00247     NIDASSERT(NO);
<a name="l00248"></a>00248     <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = [UIFont systemFontOfSize:fontSize];
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fontIsItalic) {
<a name="l00251"></a>00251     <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = [UIFont italicSystemFontOfSize:fontSize];
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fontIsBold) {
<a name="l00254"></a>00254     <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = [UIFont boldSystemFontOfSize:fontSize];
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   } <span class="keywordflow">else</span> {
<a name="l00257"></a>00257     <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> = [UIFont systemFontOfSize:fontSize];
<a name="l00258"></a>00258   }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   [_font release];
<a name="l00261"></a>00261   _font = [<a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a> retain];
<a name="l00262"></a>00262   _is.cached.Font = YES;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="keywordflow">return</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a570711f9469eb88afcedae759343c725" title="Returns the font.">font</a>;
<a name="l00265"></a>00265 }
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00269"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#aa0ad64569faeb2fa33319a29c3cb888a">00269</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#aa0ad64569faeb2fa33319a29c3cb888a" title="Returns YES if the ruleset has a &#39;text-shadow&#39; property.">hasTextShadowColor</a> {
<a name="l00270"></a>00270   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTextShadowKey];
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 
<a name="l00275"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a4ce8be8541d63448321c66d6f866cf45">00275</a> - (UIColor *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a4ce8be8541d63448321c66d6f866cf45" title="Returns the text shadow color.">textShadowColor</a> {
<a name="l00276"></a>00276   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#aa0ad64569faeb2fa33319a29c3cb888a" title="Returns YES if the ruleset has a &#39;text-shadow&#39; property.">hasTextShadowColor</a>]);
<a name="l00277"></a>00277   <span class="keywordflow">if</span> (!_is.cached.TextShadowColor) {
<a name="l00278"></a>00278     NSArray* values = [_ruleset objectForKey:kTextShadowKey];
<a name="l00279"></a>00279     _textShadowColor = [[[<span class="keyword">self</span> class] colorFromCssValues:values numberOfConsumedTokens:nil] retain];
<a name="l00280"></a>00280     _is.cached.TextShadowColor = YES;
<a name="l00281"></a>00281   }
<a name="l00282"></a>00282   <span class="keywordflow">return</span> _textShadowColor;
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 
<a name="l00287"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a27b66da6ec37a5a3a88197578c5e26df">00287</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a27b66da6ec37a5a3a88197578c5e26df" title="Returns YES if the ruleset has a &#39;text-shadow&#39; property.">hasTextShadowOffset</a> {
<a name="l00288"></a>00288   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTextShadowKey];
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00293"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a4baeb4750b0e408a2c8ba0fefa2c3486">00293</a> - (CGSize)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a4baeb4750b0e408a2c8ba0fefa2c3486" title="Returns the text shadow offset.">textShadowOffset</a> {
<a name="l00294"></a>00294   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a27b66da6ec37a5a3a88197578c5e26df" title="Returns YES if the ruleset has a &#39;text-shadow&#39; property.">hasTextShadowOffset</a>]);
<a name="l00295"></a>00295   <span class="keywordflow">if</span> (!_is.cached.TextShadowOffset) {
<a name="l00296"></a>00296     NSArray* values = [_ruleset objectForKey:kTextShadowKey];
<a name="l00297"></a>00297     NSInteger skipTokens = 0;
<a name="l00298"></a>00298     [[<span class="keyword">self</span> class] colorFromCssValues:values numberOfConsumedTokens:&amp;skipTokens];
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     _textShadowOffset = CGSizeZero;
<a name="l00301"></a>00301     <span class="keywordflow">if</span> ([values count] - skipTokens &gt;= 1) {
<a name="l00302"></a>00302       _textShadowOffset.width = [[values objectAtIndex:skipTokens] floatValue];
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304     <span class="keywordflow">if</span> ([values count] - skipTokens &gt;= 2) {
<a name="l00305"></a>00305       _textShadowOffset.height = [[values objectAtIndex:skipTokens + 1] floatValue];
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307     _is.cached.TextShadowOffset = YES;
<a name="l00308"></a>00308   }
<a name="l00309"></a>00309   <span class="keywordflow">return</span> _textShadowOffset;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00314"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ac3982526c97290d6194d3ab7931f8c1b">00314</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ac3982526c97290d6194d3ab7931f8c1b" title="Returns YES if the ruleset has an &#39;-ios-line-break-mode&#39; property.">hasLineBreakMode</a> {
<a name="l00315"></a>00315   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kLineBreakModeKey];
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 
<a name="l00320"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ae0053e834f39b6692bbc18c8308aa872">00320</a> - (UILineBreakMode)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ae0053e834f39b6692bbc18c8308aa872" title="Returns the line break mode.">lineBreakMode</a> {
<a name="l00321"></a>00321   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#ac3982526c97290d6194d3ab7931f8c1b" title="Returns YES if the ruleset has an &#39;-ios-line-break-mode&#39; property.">hasLineBreakMode</a>]);
<a name="l00322"></a>00322   <span class="keywordflow">if</span> (!_is.cached.LineBreakMode) {
<a name="l00323"></a>00323     NSArray* values = [_ruleset objectForKey:kLineBreakModeKey];
<a name="l00324"></a>00324     NIDASSERT([values count] == 1);
<a name="l00325"></a>00325     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00326"></a>00326     <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;wrap&quot;</span>]) {
<a name="l00327"></a>00327       _lineBreakMode = UILineBreakModeWordWrap;
<a name="l00328"></a>00328     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;character-wrap&quot;</span>]) {
<a name="l00329"></a>00329       _lineBreakMode = UILineBreakModeCharacterWrap;
<a name="l00330"></a>00330     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;clip&quot;</span>]) {
<a name="l00331"></a>00331       _lineBreakMode = UILineBreakModeClip;
<a name="l00332"></a>00332     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;head-truncate&quot;</span>]) {
<a name="l00333"></a>00333       _lineBreakMode = UILineBreakModeHeadTruncation;
<a name="l00334"></a>00334     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;tail-truncate&quot;</span>]) {
<a name="l00335"></a>00335       _lineBreakMode = UILineBreakModeTailTruncation;
<a name="l00336"></a>00336     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;middle-truncate&quot;</span>]) {
<a name="l00337"></a>00337       _lineBreakMode = UILineBreakModeMiddleTruncation;
<a name="l00338"></a>00338     } <span class="keywordflow">else</span> {
<a name="l00339"></a>00339       _lineBreakMode = UILineBreakModeWordWrap;
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341     _is.cached.LineBreakMode = YES;
<a name="l00342"></a>00342   }
<a name="l00343"></a>00343   <span class="keywordflow">return</span> _lineBreakMode;
<a name="l00344"></a>00344 }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 
<a name="l00348"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a27cb07ab01f2b53100b9261c9754225c">00348</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a27cb07ab01f2b53100b9261c9754225c" title="Returns YES if the ruleset has an &#39;-ios-number-of-lines&#39; property.">hasNumberOfLines</a> {
<a name="l00349"></a>00349   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kNumberOfLinesKey];
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00354"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a3e9e9fd12ec496613d4bbb89699d8e96">00354</a> - (NSInteger)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a3e9e9fd12ec496613d4bbb89699d8e96" title="Returns the number of lines.">numberOfLines</a> {
<a name="l00355"></a>00355   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a27cb07ab01f2b53100b9261c9754225c" title="Returns YES if the ruleset has an &#39;-ios-number-of-lines&#39; property.">hasNumberOfLines</a>]);
<a name="l00356"></a>00356   <span class="keywordflow">if</span> (!_is.cached.NumberOfLines) {
<a name="l00357"></a>00357     NSArray* values = [_ruleset objectForKey:kNumberOfLinesKey];
<a name="l00358"></a>00358     NIDASSERT([values count] == 1);
<a name="l00359"></a>00359     _numberOfLines = [[values objectAtIndex:0] intValue];
<a name="l00360"></a>00360     _is.cached.NumberOfLines = YES;
<a name="l00361"></a>00361   }
<a name="l00362"></a>00362   <span class="keywordflow">return</span> _numberOfLines;
<a name="l00363"></a>00363 }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365 
<a name="l00367"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a462acac7a119dad12e9c1ce1d7bb88a7">00367</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a462acac7a119dad12e9c1ce1d7bb88a7" title="Returns YES if the ruleset has an &#39;-ios-minimum-font-size&#39; property.">hasMinimumFontSize</a> {
<a name="l00368"></a>00368   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kMinimumFontSizeKey];
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 
<a name="l00373"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a37f7fefeaf1d6a8c6346d7fbfe97a04a">00373</a> - (CGFloat)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a37f7fefeaf1d6a8c6346d7fbfe97a04a" title="Returns the minimum font size.">minimumFontSize</a> {
<a name="l00374"></a>00374   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a462acac7a119dad12e9c1ce1d7bb88a7" title="Returns YES if the ruleset has an &#39;-ios-minimum-font-size&#39; property.">hasMinimumFontSize</a>]);
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (!_is.cached.MinimumFontSize) {
<a name="l00376"></a>00376     NSArray* values = [_ruleset objectForKey:kMinimumFontSizeKey];
<a name="l00377"></a>00377     NIDASSERT([values count] == 1);
<a name="l00378"></a>00378     _minimumFontSize = [[values objectAtIndex:0] floatValue];
<a name="l00379"></a>00379     _is.cached.MinimumFontSize = YES;
<a name="l00380"></a>00380   }
<a name="l00381"></a>00381   <span class="keywordflow">return</span> _minimumFontSize;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 
<a name="l00386"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#afdf16b770182574bd6ee8f9078c0e9d6">00386</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#afdf16b770182574bd6ee8f9078c0e9d6" title="Returns YES if the ruleset has an &#39;-ios-adjusts-font-size&#39; property.">hasAdjustsFontSize</a> {
<a name="l00387"></a>00387   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kAdjustsFontSizeKey];
<a name="l00388"></a>00388 }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 
<a name="l00392"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a511c96e6daef29d03648045faaabc0cd">00392</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a511c96e6daef29d03648045faaabc0cd" title="Returns the adjustsFontSize value.">adjustsFontSize</a> {
<a name="l00393"></a>00393   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#afdf16b770182574bd6ee8f9078c0e9d6" title="Returns YES if the ruleset has an &#39;-ios-adjusts-font-size&#39; property.">hasAdjustsFontSize</a>]);
<a name="l00394"></a>00394   <span class="keywordflow">if</span> (!_is.cached.AdjustsFontSize) {
<a name="l00395"></a>00395     NSArray* values = [_ruleset objectForKey:kAdjustsFontSizeKey];
<a name="l00396"></a>00396     NIDASSERT([values count] == 1);
<a name="l00397"></a>00397     _adjustsFontSize = [[values objectAtIndex:0] boolValue];
<a name="l00398"></a>00398     _is.cached.AdjustsFontSize = YES;
<a name="l00399"></a>00399   }
<a name="l00400"></a>00400   <span class="keywordflow">return</span> _adjustsFontSize;
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 
<a name="l00405"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a780b5a89f31bdd85c5d744f96155d851">00405</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a780b5a89f31bdd85c5d744f96155d851" title="Returns YES if the ruleset has an &#39;-ios-baseline-adjustment&#39; property.">hasBaselineAdjustment</a> {
<a name="l00406"></a>00406   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kBaselineAdjustmentKey];
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 
<a name="l00411"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a1dfe156ec179cb27fbfecbc44e92edf7">00411</a> - (UIBaselineAdjustment)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a1dfe156ec179cb27fbfecbc44e92edf7" title="Returns the baseline adjustment.">baselineAdjustment</a> {
<a name="l00412"></a>00412   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a780b5a89f31bdd85c5d744f96155d851" title="Returns YES if the ruleset has an &#39;-ios-baseline-adjustment&#39; property.">hasBaselineAdjustment</a>]);
<a name="l00413"></a>00413   <span class="keywordflow">if</span> (!_is.cached.BaselineAdjustment) {
<a name="l00414"></a>00414     NSArray* values = [_ruleset objectForKey:kBaselineAdjustmentKey];
<a name="l00415"></a>00415     NIDASSERT([values count] == 1);
<a name="l00416"></a>00416     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00417"></a>00417     <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;align-baselines&quot;</span>]) {
<a name="l00418"></a>00418       _baselineAdjustment = UIBaselineAdjustmentAlignBaselines;
<a name="l00419"></a>00419     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;align-centers&quot;</span>]) {
<a name="l00420"></a>00420       _baselineAdjustment = UIBaselineAdjustmentAlignCenters;
<a name="l00421"></a>00421     } <span class="keywordflow">else</span> {
<a name="l00422"></a>00422       _baselineAdjustment = UIBaselineAdjustmentNone;
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424     _is.cached.BaselineAdjustment = YES;
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426   <span class="keywordflow">return</span> _baselineAdjustment;
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 
<a name="l00431"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a6de14c0db21e22cedc2411b27fee9af5">00431</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a6de14c0db21e22cedc2411b27fee9af5" title="Returns YES if the ruleset has an &#39;opacity&#39; property.">hasOpacity</a> {
<a name="l00432"></a>00432   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kOpacityKey];
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 
<a name="l00437"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ad94bb6b47a8a5d3cb799a10f619c2d8e">00437</a> - (CGFloat)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ad94bb6b47a8a5d3cb799a10f619c2d8e" title="Returns the opacity.">opacity</a> {
<a name="l00438"></a>00438   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a6de14c0db21e22cedc2411b27fee9af5" title="Returns YES if the ruleset has an &#39;opacity&#39; property.">hasOpacity</a>]);
<a name="l00439"></a>00439   <span class="keywordflow">if</span> (!_is.cached.Opacity) {
<a name="l00440"></a>00440     NSArray* values = [_ruleset objectForKey:kOpacityKey];
<a name="l00441"></a>00441     NIDASSERT([values count] == 1);
<a name="l00442"></a>00442     _opacity = [[values objectAtIndex:0] floatValue];
<a name="l00443"></a>00443     _is.cached.Opacity = YES;
<a name="l00444"></a>00444   }
<a name="l00445"></a>00445   <span class="keywordflow">return</span> _opacity;
<a name="l00446"></a>00446 }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 
<a name="l00450"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ac54580800f721c3ba0a92f577c6bf545">00450</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ac54580800f721c3ba0a92f577c6bf545" title="Returns YES if the ruleset has a &#39;background-color&#39; property.">hasBackgroundColor</a> {
<a name="l00451"></a>00451   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kBackgroundColorKey];
<a name="l00452"></a>00452 }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 
<a name="l00456"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a95cea880df1b62f0edccd102eba7eb98">00456</a> - (UIColor *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a95cea880df1b62f0edccd102eba7eb98" title="Returns the background color.">backgroundColor</a> {
<a name="l00457"></a>00457   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#ac54580800f721c3ba0a92f577c6bf545" title="Returns YES if the ruleset has a &#39;background-color&#39; property.">hasBackgroundColor</a>]);
<a name="l00458"></a>00458   <span class="keywordflow">if</span> (!_is.cached.BackgroundColor) {
<a name="l00459"></a>00459     _backgroundColor = [[[<span class="keyword">self</span> class] colorFromCssValues:[_ruleset objectForKey:kBackgroundColorKey]
<a name="l00460"></a>00460                                   numberOfConsumedTokens:nil] retain];
<a name="l00461"></a>00461     _is.cached.BackgroundColor = YES;
<a name="l00462"></a>00462   }
<a name="l00463"></a>00463   <span class="keywordflow">return</span> _backgroundColor;
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 
<a name="l00468"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#aa5b2757a8a2d5ed3204d64aeb58a75df">00468</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#aa5b2757a8a2d5ed3204d64aeb58a75df" title="Returns YES if the ruleset has a &#39;border-radius&#39; property.">hasBorderRadius</a> {
<a name="l00469"></a>00469   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kBorderRadiusKey];
<a name="l00470"></a>00470 }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 
<a name="l00474"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#ad9c050d14f2083da8dafe32ca993bccb">00474</a> - (CGFloat)<a class="code" href="interface_n_i_c_s_s_ruleset.html#ad9c050d14f2083da8dafe32ca993bccb" title="Returns the border radius.">borderRadius</a> {
<a name="l00475"></a>00475   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#aa5b2757a8a2d5ed3204d64aeb58a75df" title="Returns YES if the ruleset has a &#39;border-radius&#39; property.">hasBorderRadius</a>]);
<a name="l00476"></a>00476   <span class="keywordflow">if</span> (!_is.cached.BorderRadius) {
<a name="l00477"></a>00477     NSArray* values = [_ruleset objectForKey:kBorderRadiusKey];
<a name="l00478"></a>00478     NIDASSERT([values count] == 1);
<a name="l00479"></a>00479     _borderRadius = [[values objectAtIndex:0] floatValue];
<a name="l00480"></a>00480     _is.cached.BorderRadius = YES;
<a name="l00481"></a>00481   }
<a name="l00482"></a>00482   <span class="keywordflow">return</span> _borderRadius;
<a name="l00483"></a>00483 }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 
<a name="l00487"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a37a794d327087c3bf08fa08be1ae29ba">00487</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a37a794d327087c3bf08fa08be1ae29ba" title="Returns YES if the ruleset has a &#39;border&#39; or &#39;border-color&#39; property.">hasBorderColor</a> {
<a name="l00488"></a>00488   <span class="keywordflow">return</span> (nil != [_ruleset objectForKey:kBorderColorKey]
<a name="l00489"></a>00489           || nil != [_ruleset objectForKey:kBorderKey]);
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 
<a name="l00494"></a>00494 - (void)cacheBorderValues {
<a name="l00495"></a>00495   _borderWidth = 0;
<a name="l00496"></a>00496   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(_borderColor);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   NSArray* values = nil;
<a name="l00499"></a>00499 
<a name="l00500"></a>00500   <span class="comment">// There are two ways to set border color and width: border and border-color/border-width.</span>
<a name="l00501"></a>00501   <span class="comment">// Newer definitions of these values should overwrite previous definitions so we must</span>
<a name="l00502"></a>00502   <span class="comment">// respect ordering here.</span>
<a name="l00503"></a>00503   BOOL hasSetBorderColor = NO;
<a name="l00504"></a>00504   BOOL hasSetBorderWidth = NO;
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   NSArray* order = [_ruleset objectForKey:kPropertyOrderKey];
<a name="l00507"></a>00507   <span class="keywordflow">for</span> (<a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* name in [order reverseObjectEnumerator]) {
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (!hasSetBorderColor &amp;&amp; [name isEqualToString:kBorderColorKey]) {
<a name="l00509"></a>00509       values = [_ruleset objectForKey:name];
<a name="l00510"></a>00510       _borderColor = [[[<span class="keyword">self</span> class] colorFromCssValues:values
<a name="l00511"></a>00511                                 numberOfConsumedTokens:nil] retain];
<a name="l00512"></a>00512       hasSetBorderColor = YES;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasSetBorderWidth &amp;&amp; [name isEqualToString:kBorderWidthKey]) {
<a name="l00515"></a>00515       values = [_ruleset objectForKey:name];
<a name="l00516"></a>00516       NIDASSERT([values count] == 1); <span class="keywordflow">if</span> ([values count] &lt; 1) { <span class="keywordflow">continue</span>; }
<a name="l00517"></a>00517       _borderWidth = [[values objectAtIndex:0] floatValue];
<a name="l00518"></a>00518       hasSetBorderWidth = YES;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasSetBorderColor &amp;&amp; !hasSetBorderWidth &amp;&amp; [name isEqualToString:kBorderKey]) {
<a name="l00521"></a>00521       values = [_ruleset objectForKey:name];
<a name="l00522"></a>00522 
<a name="l00523"></a>00523       <span class="keywordflow">if</span> ([values count] &gt;= 1) {
<a name="l00524"></a>00524         <span class="comment">// Border width</span>
<a name="l00525"></a>00525         _borderWidth = [[values objectAtIndex:0] floatValue];
<a name="l00526"></a>00526         hasSetBorderWidth = YES;
<a name="l00527"></a>00527       }
<a name="l00528"></a>00528       <span class="keywordflow">if</span> ([values count] &gt;= 3) {
<a name="l00529"></a>00529         <span class="comment">// Border color</span>
<a name="l00530"></a>00530         _borderColor = [[[<span class="keyword">self</span> class] colorFromCssValues:[values subarrayWithRange:NSMakeRange(2, [values count] - 2)]
<a name="l00531"></a>00531                                   numberOfConsumedTokens:nil] retain];
<a name="l00532"></a>00532         hasSetBorderColor = YES;
<a name="l00533"></a>00533       }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     
<a name="l00536"></a>00536     <span class="keywordflow">if</span> (hasSetBorderColor &amp;&amp; hasSetBorderWidth) {
<a name="l00537"></a>00537       <span class="comment">// Once we&#39;ve set all values then we can ignore any previous values.</span>
<a name="l00538"></a>00538       <span class="keywordflow">break</span>;
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540   }
<a name="l00541"></a>00541   
<a name="l00542"></a>00542   _is.cached.BorderColor = hasSetBorderColor;
<a name="l00543"></a>00543   _is.cached.BorderWidth = hasSetBorderWidth;
<a name="l00544"></a>00544 }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546 
<a name="l00548"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a1f96bf068e1c1667557d2b566d204019">00548</a> - (UIColor *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a1f96bf068e1c1667557d2b566d204019" title="Returns the border color.">borderColor</a> {
<a name="l00549"></a>00549   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a37a794d327087c3bf08fa08be1ae29ba" title="Returns YES if the ruleset has a &#39;border&#39; or &#39;border-color&#39; property.">hasBorderColor</a>]);
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   [<span class="keyword">self</span> cacheBorderValues];
<a name="l00552"></a>00552   <span class="keywordflow">return</span> _borderColor;
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 
<a name="l00557"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a98c9354965c0d3bcc0ff97d943d654ff">00557</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a98c9354965c0d3bcc0ff97d943d654ff" title="Returns YES if the ruleset has a &#39;border&#39; or &#39;border-width&#39; property.">hasBorderWidth</a> {
<a name="l00558"></a>00558   <span class="keywordflow">return</span> (nil != [_ruleset objectForKey:kBorderWidthKey]
<a name="l00559"></a>00559           || nil != [_ruleset objectForKey:kBorderKey]);
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 
<a name="l00564"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a433528c5d69f9fa29773cb15d49ed624">00564</a> - (CGFloat)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a433528c5d69f9fa29773cb15d49ed624" title="Returns the border width.">borderWidth</a> {
<a name="l00565"></a>00565   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a98c9354965c0d3bcc0ff97d943d654ff" title="Returns YES if the ruleset has a &#39;border&#39; or &#39;border-width&#39; property.">hasBorderWidth</a>]);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   [<span class="keyword">self</span> cacheBorderValues];
<a name="l00568"></a>00568   <span class="keywordflow">return</span> _borderWidth;
<a name="l00569"></a>00569 }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 
<a name="l00573"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a56f7e80728e458c6bbc1fea899f309a0">00573</a> - (BOOL)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a56f7e80728e458c6bbc1fea899f309a0" title="Returns YES if the ruleset has an &#39;-ios-tint-color&#39; property.">hasTintColor</a> {
<a name="l00574"></a>00574   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTintColorKey];
<a name="l00575"></a>00575 }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 
<a name="l00579"></a><a class="code" href="interface_n_i_c_s_s_ruleset.html#a2d134869cff8b392d41d9e93c8554aa2">00579</a> - (UIColor *)<a class="code" href="interface_n_i_c_s_s_ruleset.html#a2d134869cff8b392d41d9e93c8554aa2" title="Returns the tint color.">tintColor</a> {
<a name="l00580"></a>00580   NIDASSERT([<span class="keyword">self</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#a56f7e80728e458c6bbc1fea899f309a0" title="Returns YES if the ruleset has an &#39;-ios-tint-color&#39; property.">hasTintColor</a>]);
<a name="l00581"></a>00581   <span class="keywordflow">if</span> (!_is.cached.TintColor) {
<a name="l00582"></a>00582     _tintColor = [[[<span class="keyword">self</span> class] colorFromCssValues:[_ruleset objectForKey:kTintColorKey]
<a name="l00583"></a>00583                             numberOfConsumedTokens:nil] retain];
<a name="l00584"></a>00584     _is.cached.TintColor = YES;
<a name="l00585"></a>00585   }
<a name="l00586"></a>00586   <span class="keywordflow">return</span> _tintColor;
<a name="l00587"></a>00587 }
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 
<a name="l00591"></a>00591 - (BOOL)hasActivityIndicatorStyle {
<a name="l00592"></a>00592   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kActivityIndicatorStyleKey];
<a name="l00593"></a>00593 }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00597"></a>00597 - (UIActivityIndicatorViewStyle)activityIndicatorStyle {
<a name="l00598"></a>00598   NIDASSERT([<span class="keyword">self</span> hasActivityIndicatorStyle]);
<a name="l00599"></a>00599   <span class="keywordflow">if</span> (!_is.cached.ActivityIndicatorStyle) {
<a name="l00600"></a>00600     NSArray* values = [_ruleset objectForKey:kActivityIndicatorStyleKey];
<a name="l00601"></a>00601     NIDASSERT([values count] == 1);
<a name="l00602"></a>00602     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00603"></a>00603     <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;white&quot;</span>]) {
<a name="l00604"></a>00604       _activityIndicatorStyle = UIActivityIndicatorViewStyleWhite;
<a name="l00605"></a>00605     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;gray&quot;</span>]) {
<a name="l00606"></a>00606       _activityIndicatorStyle = UIActivityIndicatorViewStyleGray;
<a name="l00607"></a>00607     } <span class="keywordflow">else</span> {
<a name="l00608"></a>00608       _activityIndicatorStyle = UIActivityIndicatorViewStyleWhiteLarge;
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610     _is.cached.ActivityIndicatorStyle = YES;
<a name="l00611"></a>00611   }
<a name="l00612"></a>00612   <span class="keywordflow">return</span> _activityIndicatorStyle;
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 
<a name="l00617"></a>00617 - (BOOL)hasAutoresizing {
<a name="l00618"></a>00618   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kAutoresizingKey];
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 
<a name="l00623"></a>00623 - (UIViewAutoresizing)autoresizing {
<a name="l00624"></a>00624   NIDASSERT([<span class="keyword">self</span> hasAutoresizing]);
<a name="l00625"></a>00625   <span class="keywordflow">if</span> (!_is.cached.Autoresizing) {
<a name="l00626"></a>00626     NSArray* values = [_ruleset objectForKey:kAutoresizingKey];
<a name="l00627"></a>00627     UIViewAutoresizing autoresizing = UIViewAutoresizingNone;
<a name="l00628"></a>00628     <span class="keywordflow">for</span> (<a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value in values) {
<a name="l00629"></a>00629       <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;left&quot;</span>]) {
<a name="l00630"></a>00630         autoresizing |= UIViewAutoresizingFlexibleLeftMargin;
<a name="l00631"></a>00631       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;top&quot;</span>]) {
<a name="l00632"></a>00632         autoresizing |= UIViewAutoresizingFlexibleTopMargin;
<a name="l00633"></a>00633       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;right&quot;</span>]) {
<a name="l00634"></a>00634         autoresizing |= UIViewAutoresizingFlexibleRightMargin;
<a name="l00635"></a>00635       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;bottom&quot;</span>]) {
<a name="l00636"></a>00636         autoresizing |= UIViewAutoresizingFlexibleBottomMargin;
<a name="l00637"></a>00637       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;width&quot;</span>]) {
<a name="l00638"></a>00638         autoresizing |= UIViewAutoresizingFlexibleWidth;
<a name="l00639"></a>00639       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;height&quot;</span>]) {
<a name="l00640"></a>00640         autoresizing |= UIViewAutoresizingFlexibleHeight;
<a name="l00641"></a>00641       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;all&quot;</span>]) {
<a name="l00642"></a>00642         autoresizing |= UIViewAutoresizingFlexibleDimensions | UIViewAutoresizingFlexibleMargins;
<a name="l00643"></a>00643       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;margins&quot;</span>]) {
<a name="l00644"></a>00644         autoresizing |= UIViewAutoresizingFlexibleMargins;
<a name="l00645"></a>00645       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;dimensions&quot;</span>]) {
<a name="l00646"></a>00646         autoresizing |= UIViewAutoresizingFlexibleDimensions;
<a name="l00647"></a>00647       }
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649     _autoresizing = autoresizing;
<a name="l00650"></a>00650     _is.cached.Autoresizing = YES;
<a name="l00651"></a>00651   }
<a name="l00652"></a>00652   <span class="keywordflow">return</span> _autoresizing;
<a name="l00653"></a>00653 }
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00657"></a>00657 - (BOOL)hasTableViewCellSeparatorStyle {
<a name="l00658"></a>00658   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kTableViewCellSeparatorStyleKey];
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
<a name="l00663"></a>00663 - (UITableViewCellSeparatorStyle)tableViewCellSeparatorStyle {
<a name="l00664"></a>00664   NIDASSERT([<span class="keyword">self</span> hasTableViewCellSeparatorStyle]);
<a name="l00665"></a>00665   <span class="keywordflow">if</span> (!_is.cached.TableViewCellSeparatorStyle) {
<a name="l00666"></a>00666     NSArray* values = [_ruleset objectForKey:kActivityIndicatorStyleKey];
<a name="l00667"></a>00667     NIDASSERT([values count] == 1);
<a name="l00668"></a>00668     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00669"></a>00669     UITableViewCellSeparatorStyle style = UITableViewCellSeparatorStyleSingleLine;
<a name="l00670"></a>00670     <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;none&quot;</span>]) {
<a name="l00671"></a>00671       style = UITableViewCellSeparatorStyleNone;
<a name="l00672"></a>00672     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;single-line-etched&quot;</span>]) {
<a name="l00673"></a>00673       style = UITableViewCellSeparatorStyleSingleLineEtched;
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675     _tableViewCellSeparatorStyle = style;
<a name="l00676"></a>00676     _is.cached.TableViewCellSeparatorStyle = YES;
<a name="l00677"></a>00677   }
<a name="l00678"></a>00678   <span class="keywordflow">return</span> _tableViewCellSeparatorStyle;
<a name="l00679"></a>00679 }
<a name="l00680"></a>00680 
<a name="l00681"></a>00681 
<a name="l00683"></a>00683 - (BOOL)hasScrollViewIndicatorStyle {
<a name="l00684"></a>00684   <span class="keywordflow">return</span> nil != [_ruleset objectForKey:kScrollViewIndicatorStyleKey];
<a name="l00685"></a>00685 }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 
<a name="l00689"></a>00689 - (UIScrollViewIndicatorStyle)scrollViewIndicatorStyle {
<a name="l00690"></a>00690   NIDASSERT([<span class="keyword">self</span> hasScrollViewIndicatorStyle]);
<a name="l00691"></a>00691   <span class="keywordflow">if</span> (!_is.cached.ScrollViewIndicatorStyle) {
<a name="l00692"></a>00692     NSArray* values = [_ruleset objectForKey:kScrollViewIndicatorStyleKey];
<a name="l00693"></a>00693     NIDASSERT([values count] == 1);
<a name="l00694"></a>00694     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [values objectAtIndex:0];
<a name="l00695"></a>00695     UIScrollViewIndicatorStyle style = UIScrollViewIndicatorStyleDefault;
<a name="l00696"></a>00696     <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;black&quot;</span>]) {
<a name="l00697"></a>00697       style = UIScrollViewIndicatorStyleBlack;
<a name="l00698"></a>00698     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;white&quot;</span>]) {
<a name="l00699"></a>00699       style = UIScrollViewIndicatorStyleWhite;
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701     _scrollViewIndicatorStyle = style;
<a name="l00702"></a>00702     _is.cached.ScrollViewIndicatorStyle = YES;
<a name="l00703"></a>00703   }
<a name="l00704"></a>00704   <span class="keywordflow">return</span> _scrollViewIndicatorStyle;
<a name="l00705"></a>00705 }
<a name="l00706"></a>00706 
<a name="l00707"></a>00707 
<a name="l00710"></a>00710 <span class="preprocessor">#pragma mark - NSNotifications</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
<a name="l00712"></a>00712 
<a name="l00714"></a>00714 - (void)reduceMemory {
<a name="l00715"></a>00715   <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(sColorTable);
<a name="l00716"></a>00716   
<a name="l00717"></a>00717   [<span class="keyword">self</span> clearCache];
<a name="l00718"></a>00718   
<a name="l00719"></a>00719   memset(&amp;_is, 0, <span class="keyword">sizeof</span>(_is));
<a name="l00720"></a>00720 }
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 
<a name="l00724"></a>00724 - (void)didReceiveMemoryWarning:(<span class="keywordtype">void</span>*)object {
<a name="l00725"></a>00725   [<span class="keyword">self</span> reduceMemory];
<a name="l00726"></a>00726 }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 
<a name="l00731"></a>00731 <span class="preprocessor">#pragma mark - Color Tables</span>
<a name="l00732"></a>00732 <span class="preprocessor"></span>
<a name="l00733"></a>00733 
<a name="l00735"></a>00735 + (NSDictionary *)colorTable {
<a name="l00736"></a>00736   <span class="keywordflow">if</span> (nil == sColorTable) {
<a name="l00737"></a>00737     <span class="comment">// This color table was generated from http://www.w3.org/TR/css3-color/</span>
<a name="l00738"></a>00738     <span class="comment">//</span>
<a name="l00739"></a>00739     <span class="comment">// The output was sorted,</span>
<a name="l00740"></a>00740     <span class="comment">// &gt; pbpaste | sort | pbcopy</span>
<a name="l00741"></a>00741     <span class="comment">//</span>
<a name="l00742"></a>00742     <span class="comment">// reformatted using a regex,</span>
<a name="l00743"></a>00743     <span class="comment">// ^(.+)\t(.+)\t(.+) =&gt; RGBCOLOR($3), @&quot;$1&quot;,</span>
<a name="l00744"></a>00744     <span class="comment">//</span>
<a name="l00745"></a>00745     <span class="comment">// and then uniq&#39;d</span>
<a name="l00746"></a>00746     <span class="comment">// &gt; pbpaste | uniq | pbcopy</span>
<a name="l00747"></a>00747     NSMutableDictionary* colorTable =
<a name="l00748"></a>00748     <span class="comment">// System colors</span>[[NSMutableDictionary alloc] initWithObjectsAndKeys:
<a name="l00749"></a>00749      RGBCOLOR(240,248,255), @&quot;aliceblue&quot;,
<a name="l00750"></a>00750      RGBCOLOR(250,235,215), @&quot;antiquewhite&quot;,
<a name="l00751"></a>00751      RGBCOLOR(0,255,255), @&quot;aqua&quot;,
<a name="l00752"></a>00752      RGBCOLOR(127,255,212), @&quot;aquamarine&quot;,
<a name="l00753"></a>00753      RGBCOLOR(240,255,255), @&quot;azure&quot;,
<a name="l00754"></a>00754      RGBCOLOR(245,245,220), @&quot;beige&quot;,
<a name="l00755"></a>00755      RGBCOLOR(255,228,196), @&quot;bisque&quot;,
<a name="l00756"></a>00756      RGBCOLOR(0,0,0), @&quot;black&quot;,
<a name="l00757"></a>00757      RGBCOLOR(255,235,205), @&quot;blanchedalmond&quot;,
<a name="l00758"></a>00758      RGBCOLOR(0,0,255), @&quot;blue&quot;,
<a name="l00759"></a>00759      RGBCOLOR(138,43,226), @&quot;blueviolet&quot;,
<a name="l00760"></a>00760      RGBCOLOR(165,42,42), @&quot;brown&quot;,
<a name="l00761"></a>00761      RGBCOLOR(222,184,135), @&quot;burlywood&quot;,
<a name="l00762"></a>00762      RGBCOLOR(95,158,160), @&quot;cadetblue&quot;,
<a name="l00763"></a>00763      RGBCOLOR(127,255,0), @&quot;chartreuse&quot;,
<a name="l00764"></a>00764      RGBCOLOR(210,105,30), @&quot;chocolate&quot;,
<a name="l00765"></a>00765      RGBCOLOR(255,127,80), @&quot;coral&quot;,
<a name="l00766"></a>00766      RGBCOLOR(100,149,237), @&quot;cornflowerblue&quot;,
<a name="l00767"></a>00767      RGBCOLOR(255,248,220), @&quot;cornsilk&quot;,
<a name="l00768"></a>00768      RGBCOLOR(220,20,60), @&quot;crimson&quot;,
<a name="l00769"></a>00769      RGBCOLOR(0,255,255), @&quot;cyan&quot;,
<a name="l00770"></a>00770      RGBCOLOR(0,0,139), @&quot;darkblue&quot;,
<a name="l00771"></a>00771      RGBCOLOR(0,139,139), @&quot;darkcyan&quot;,
<a name="l00772"></a>00772      RGBCOLOR(184,134,11), @&quot;darkgoldenrod&quot;,
<a name="l00773"></a>00773      RGBCOLOR(169,169,169), @&quot;darkgray&quot;,
<a name="l00774"></a>00774      RGBCOLOR(0,100,0), @&quot;darkgreen&quot;,
<a name="l00775"></a>00775      RGBCOLOR(169,169,169), @&quot;darkgrey&quot;,
<a name="l00776"></a>00776      RGBCOLOR(189,183,107), @&quot;darkkhaki&quot;,
<a name="l00777"></a>00777      RGBCOLOR(139,0,139), @&quot;darkmagenta&quot;,
<a name="l00778"></a>00778      RGBCOLOR(85,107,47), @&quot;darkolivegreen&quot;,
<a name="l00779"></a>00779      RGBCOLOR(255,140,0), @&quot;darkorange&quot;,
<a name="l00780"></a>00780      RGBCOLOR(153,50,204), @&quot;darkorchid&quot;,
<a name="l00781"></a>00781      RGBCOLOR(139,0,0), @&quot;darkred&quot;,
<a name="l00782"></a>00782      RGBCOLOR(233,150,122), @&quot;darksalmon&quot;,
<a name="l00783"></a>00783      RGBCOLOR(143,188,143), @&quot;darkseagreen&quot;,
<a name="l00784"></a>00784      RGBCOLOR(72,61,139), @&quot;darkslateblue&quot;,
<a name="l00785"></a>00785      RGBCOLOR(47,79,79), @&quot;darkslategray&quot;,
<a name="l00786"></a>00786      RGBCOLOR(47,79,79), @&quot;darkslategrey&quot;,
<a name="l00787"></a>00787      RGBCOLOR(0,206,209), @&quot;darkturquoise&quot;,
<a name="l00788"></a>00788      RGBCOLOR(148,0,211), @&quot;darkviolet&quot;,
<a name="l00789"></a>00789      RGBCOLOR(255,20,147), @&quot;deeppink&quot;,
<a name="l00790"></a>00790      RGBCOLOR(0,191,255), @&quot;deepskyblue&quot;,
<a name="l00791"></a>00791      RGBCOLOR(105,105,105), @&quot;dimgray&quot;,
<a name="l00792"></a>00792      RGBCOLOR(105,105,105), @&quot;dimgrey&quot;,
<a name="l00793"></a>00793      RGBCOLOR(30,144,255), @&quot;dodgerblue&quot;,
<a name="l00794"></a>00794      RGBCOLOR(178,34,34), @&quot;firebrick&quot;,
<a name="l00795"></a>00795      RGBCOLOR(255,250,240), @&quot;floralwhite&quot;,
<a name="l00796"></a>00796      RGBCOLOR(34,139,34), @&quot;forestgreen&quot;,
<a name="l00797"></a>00797      RGBCOLOR(255,0,255), @&quot;fuchsia&quot;,
<a name="l00798"></a>00798      RGBCOLOR(220,220,220), @&quot;gainsboro&quot;,
<a name="l00799"></a>00799      RGBCOLOR(248,248,255), @&quot;ghostwhite&quot;,
<a name="l00800"></a>00800      RGBCOLOR(255,215,0), @&quot;gold&quot;,
<a name="l00801"></a>00801      RGBCOLOR(218,165,32), @&quot;goldenrod&quot;,
<a name="l00802"></a>00802      RGBCOLOR(128,128,128), @&quot;gray&quot;,
<a name="l00803"></a>00803      RGBCOLOR(0,128,0), @&quot;green&quot;,
<a name="l00804"></a>00804      RGBCOLOR(173,255,47), @&quot;greenyellow&quot;,
<a name="l00805"></a>00805      RGBCOLOR(128,128,128), @&quot;grey&quot;,
<a name="l00806"></a>00806      RGBCOLOR(240,255,240), @&quot;honeydew&quot;,
<a name="l00807"></a>00807      RGBCOLOR(255,105,180), @&quot;hotpink&quot;,
<a name="l00808"></a>00808      RGBCOLOR(205,92,92), @&quot;indianred&quot;,
<a name="l00809"></a>00809      RGBCOLOR(75,0,130), @&quot;indigo&quot;,
<a name="l00810"></a>00810      RGBCOLOR(255,255,240), @&quot;ivory&quot;,
<a name="l00811"></a>00811      RGBCOLOR(240,230,140), @&quot;khaki&quot;,
<a name="l00812"></a>00812      RGBCOLOR(230,230,250), @&quot;lavender&quot;,
<a name="l00813"></a>00813      RGBCOLOR(255,240,245), @&quot;lavenderblush&quot;,
<a name="l00814"></a>00814      RGBCOLOR(124,252,0), @&quot;lawngreen&quot;,
<a name="l00815"></a>00815      RGBCOLOR(255,250,205), @&quot;lemonchiffon&quot;,
<a name="l00816"></a>00816      RGBCOLOR(173,216,230), @&quot;lightblue&quot;,
<a name="l00817"></a>00817      RGBCOLOR(240,128,128), @&quot;lightcoral&quot;,
<a name="l00818"></a>00818      RGBCOLOR(224,255,255), @&quot;lightcyan&quot;,
<a name="l00819"></a>00819      RGBCOLOR(250,250,210), @&quot;lightgoldenrodyellow&quot;,
<a name="l00820"></a>00820      RGBCOLOR(211,211,211), @&quot;lightgray&quot;,
<a name="l00821"></a>00821      RGBCOLOR(144,238,144), @&quot;lightgreen&quot;,
<a name="l00822"></a>00822      RGBCOLOR(211,211,211), @&quot;lightgrey&quot;,
<a name="l00823"></a>00823      RGBCOLOR(255,182,193), @&quot;lightpink&quot;,
<a name="l00824"></a>00824      RGBCOLOR(255,160,122), @&quot;lightsalmon&quot;,
<a name="l00825"></a>00825      RGBCOLOR(32,178,170), @&quot;lightseagreen&quot;,
<a name="l00826"></a>00826      RGBCOLOR(135,206,250), @&quot;lightskyblue&quot;,
<a name="l00827"></a>00827      RGBCOLOR(119,136,153), @&quot;lightslategray&quot;,
<a name="l00828"></a>00828      RGBCOLOR(119,136,153), @&quot;lightslategrey&quot;,
<a name="l00829"></a>00829      RGBCOLOR(176,196,222), @&quot;lightsteelblue&quot;,
<a name="l00830"></a>00830      RGBCOLOR(255,255,224), @&quot;lightyellow&quot;,
<a name="l00831"></a>00831      RGBCOLOR(0,255,0), @&quot;lime&quot;,
<a name="l00832"></a>00832      RGBCOLOR(50,205,50), @&quot;limegreen&quot;,
<a name="l00833"></a>00833      RGBCOLOR(250,240,230), @&quot;linen&quot;,
<a name="l00834"></a>00834      RGBCOLOR(255,0,255), @&quot;magenta&quot;,
<a name="l00835"></a>00835      RGBCOLOR(128,0,0), @&quot;maroon&quot;,
<a name="l00836"></a>00836      RGBCOLOR(102,205,170), @&quot;mediumaquamarine&quot;,
<a name="l00837"></a>00837      RGBCOLOR(0,0,205), @&quot;mediumblue&quot;,
<a name="l00838"></a>00838      RGBCOLOR(186,85,211), @&quot;mediumorchid&quot;,
<a name="l00839"></a>00839      RGBCOLOR(147,112,219), @&quot;mediumpurple&quot;,
<a name="l00840"></a>00840      RGBCOLOR(60,179,113), @&quot;mediumseagreen&quot;,
<a name="l00841"></a>00841      RGBCOLOR(123,104,238), @&quot;mediumslateblue&quot;,
<a name="l00842"></a>00842      RGBCOLOR(0,250,154), @&quot;mediumspringgreen&quot;,
<a name="l00843"></a>00843      RGBCOLOR(72,209,204), @&quot;mediumturquoise&quot;,
<a name="l00844"></a>00844      RGBCOLOR(199,21,133), @&quot;mediumvioletred&quot;,
<a name="l00845"></a>00845      RGBCOLOR(25,25,112), @&quot;midnightblue&quot;,
<a name="l00846"></a>00846      RGBCOLOR(245,255,250), @&quot;mintcream&quot;,
<a name="l00847"></a>00847      RGBCOLOR(255,228,225), @&quot;mistyrose&quot;,
<a name="l00848"></a>00848      RGBCOLOR(255,228,181), @&quot;moccasin&quot;,
<a name="l00849"></a>00849      RGBCOLOR(255,222,173), @&quot;navajowhite&quot;,
<a name="l00850"></a>00850      RGBCOLOR(0,0,128), @&quot;navy&quot;,
<a name="l00851"></a>00851      RGBCOLOR(253,245,230), @&quot;oldlace&quot;,
<a name="l00852"></a>00852      RGBCOLOR(128,128,0), @&quot;olive&quot;,
<a name="l00853"></a>00853      RGBCOLOR(107,142,35), @&quot;olivedrab&quot;,
<a name="l00854"></a>00854      RGBCOLOR(255,165,0), @&quot;orange&quot;,
<a name="l00855"></a>00855      RGBCOLOR(255,69,0), @&quot;orangered&quot;,
<a name="l00856"></a>00856      RGBCOLOR(218,112,214), @&quot;orchid&quot;,
<a name="l00857"></a>00857      RGBCOLOR(238,232,170), @&quot;palegoldenrod&quot;,
<a name="l00858"></a>00858      RGBCOLOR(152,251,152), @&quot;palegreen&quot;,
<a name="l00859"></a>00859      RGBCOLOR(175,238,238), @&quot;paleturquoise&quot;,
<a name="l00860"></a>00860      RGBCOLOR(219,112,147), @&quot;palevioletred&quot;,
<a name="l00861"></a>00861      RGBCOLOR(255,239,213), @&quot;papayawhip&quot;,
<a name="l00862"></a>00862      RGBCOLOR(255,218,185), @&quot;peachpuff&quot;,
<a name="l00863"></a>00863      RGBCOLOR(205,133,63), @&quot;peru&quot;,
<a name="l00864"></a>00864      RGBCOLOR(255,192,203), @&quot;pink&quot;,
<a name="l00865"></a>00865      RGBCOLOR(221,160,221), @&quot;plum&quot;,
<a name="l00866"></a>00866      RGBCOLOR(176,224,230), @&quot;powderblue&quot;,
<a name="l00867"></a>00867      RGBCOLOR(128,0,128), @&quot;purple&quot;,
<a name="l00868"></a>00868      RGBCOLOR(255,0,0), @&quot;red&quot;,
<a name="l00869"></a>00869      RGBCOLOR(188,143,143), @&quot;rosybrown&quot;,
<a name="l00870"></a>00870      RGBCOLOR(65,105,225), @&quot;royalblue&quot;,
<a name="l00871"></a>00871      RGBCOLOR(139,69,19), @&quot;saddlebrown&quot;,
<a name="l00872"></a>00872      RGBCOLOR(250,128,114), @&quot;salmon&quot;,
<a name="l00873"></a>00873      RGBCOLOR(244,164,96), @&quot;sandybrown&quot;,
<a name="l00874"></a>00874      RGBCOLOR(46,139,87), @&quot;seagreen&quot;,
<a name="l00875"></a>00875      RGBCOLOR(255,245,238), @&quot;seashell&quot;,
<a name="l00876"></a>00876      RGBCOLOR(160,82,45), @&quot;sienna&quot;,
<a name="l00877"></a>00877      RGBCOLOR(192,192,192), @&quot;silver&quot;,
<a name="l00878"></a>00878      RGBCOLOR(135,206,235), @&quot;skyblue&quot;,
<a name="l00879"></a>00879      RGBCOLOR(106,90,205), @&quot;slateblue&quot;,
<a name="l00880"></a>00880      RGBCOLOR(112,128,144), @&quot;slategray&quot;,
<a name="l00881"></a>00881      RGBCOLOR(112,128,144), @&quot;slategrey&quot;,
<a name="l00882"></a>00882      RGBCOLOR(255,250,250), @&quot;snow&quot;,
<a name="l00883"></a>00883      RGBCOLOR(0,255,127), @&quot;springgreen&quot;,
<a name="l00884"></a>00884      RGBCOLOR(70,130,180), @&quot;steelblue&quot;,
<a name="l00885"></a>00885      RGBCOLOR(210,180,140), @&quot;tan&quot;,
<a name="l00886"></a>00886      RGBCOLOR(0,128,128), @&quot;teal&quot;,
<a name="l00887"></a>00887      RGBCOLOR(216,191,216), @&quot;thistle&quot;,
<a name="l00888"></a>00888      RGBCOLOR(255,99,71), @&quot;tomato&quot;,
<a name="l00889"></a>00889      RGBCOLOR(64,224,208), @&quot;turquoise&quot;,
<a name="l00890"></a>00890      RGBCOLOR(238,130,238), @&quot;violet&quot;,
<a name="l00891"></a>00891      RGBCOLOR(245,222,179), @&quot;wheat&quot;,
<a name="l00892"></a>00892      RGBCOLOR(255,255,255), @&quot;white&quot;,
<a name="l00893"></a>00893      RGBCOLOR(245,245,245), @&quot;whitesmoke&quot;,
<a name="l00894"></a>00894      RGBCOLOR(255,255,0), @&quot;yellow&quot;,
<a name="l00895"></a>00895      RGBCOLOR(154,205,50), @&quot;yellowgreen&quot;,
<a name="l00896"></a>00896      
<a name="l00897"></a>00897      
<a name="l00898"></a>00898      [UIColor lightTextColor],                @&quot;lightTextColor&quot;,
<a name="l00899"></a>00899      [UIColor darkTextColor],                 @&quot;darkTextColor&quot;,
<a name="l00900"></a>00900      [UIColor groupTableViewBackgroundColor], @&quot;groupTableViewBackgroundColor&quot;,
<a name="l00901"></a>00901      [UIColor viewFlipsideBackgroundColor],   @&quot;viewFlipsideBackgroundColor&quot;,
<a name="l00902"></a>00902      nil];
<a name="l00903"></a>00903     
<a name="l00904"></a>00904     <span class="keywordflow">if</span> ([UIColor respondsToSelector:<span class="keyword">@selector</span>(scrollViewTexturedBackgroundColor)]) {
<a name="l00905"></a>00905       <span class="comment">// 3.2 and up</span>
<a name="l00906"></a>00906       UIColor* color = [UIColor scrollViewTexturedBackgroundColor];
<a name="l00907"></a>00907       <span class="keywordflow">if</span> (nil != color) {
<a name="l00908"></a>00908         [colorTable setObject:color
<a name="l00909"></a>00909                        forKey:@&quot;scrollViewTexturedBackgroundColor&quot;];
<a name="l00910"></a>00910       }
<a name="l00911"></a>00911     }
<a name="l00912"></a>00912     
<a name="l00913"></a>00913     <span class="keywordflow">if</span> ([UIColor respondsToSelector:<span class="keyword">@selector</span>(underPageBackgroundColor)]) {
<a name="l00914"></a>00914       <span class="comment">// 5.0 and up</span>
<a name="l00915"></a>00915       UIColor* color = [UIColor underPageBackgroundColor];
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (nil != color) {
<a name="l00917"></a>00917         [colorTable setObject:color
<a name="l00918"></a>00918                        forKey:@&quot;underPageBackgroundColor&quot;];
<a name="l00919"></a>00919       }
<a name="l00920"></a>00920     }
<a name="l00921"></a>00921 
<a name="l00922"></a>00922     <span class="comment">// Replace the web colors with their system color equivalents.</span>
<a name="l00923"></a>00923     [colorTable setObject:[UIColor blackColor] forKey:@&quot;black&quot;];
<a name="l00924"></a>00924     [colorTable setObject:[UIColor darkGrayColor] forKey:@&quot;darkGray&quot;];
<a name="l00925"></a>00925     [colorTable setObject:[UIColor lightGrayColor] forKey:@&quot;lightGray&quot;];
<a name="l00926"></a>00926     [colorTable setObject:[UIColor whiteColor] forKey:@&quot;white&quot;];
<a name="l00927"></a>00927     [colorTable setObject:[UIColor grayColor] forKey:@&quot;gray&quot;];
<a name="l00928"></a>00928     [colorTable setObject:[UIColor redColor] forKey:@&quot;red&quot;];
<a name="l00929"></a>00929     [colorTable setObject:[UIColor greenColor] forKey:@&quot;green&quot;];
<a name="l00930"></a>00930     [colorTable setObject:[UIColor blueColor] forKey:@&quot;blue&quot;];
<a name="l00931"></a>00931     [colorTable setObject:[UIColor cyanColor] forKey:@&quot;cyan&quot;];
<a name="l00932"></a>00932     [colorTable setObject:[UIColor yellowColor] forKey:@&quot;yellow&quot;];
<a name="l00933"></a>00933     [colorTable setObject:[UIColor magentaColor] forKey:@&quot;magenta&quot;];
<a name="l00934"></a>00934     [colorTable setObject:[UIColor orangeColor] forKey:@&quot;orange&quot;];
<a name="l00935"></a>00935     [colorTable setObject:[UIColor purpleColor] forKey:@&quot;purple&quot;];
<a name="l00936"></a>00936     [colorTable setObject:[UIColor brownColor] forKey:@&quot;brown&quot;];
<a name="l00937"></a>00937     [colorTable setObject:[UIColor clearColor] forKey:@&quot;clear&quot;];
<a name="l00938"></a>00938 
<a name="l00939"></a>00939     sColorTable = [colorTable copy];
<a name="l00940"></a>00940     <a class="code" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY</a>(colorTable);
<a name="l00941"></a>00941   }
<a name="l00942"></a>00942   <span class="keywordflow">return</span> sColorTable;
<a name="l00943"></a>00943 }
<a name="l00944"></a>00944 
<a name="l00945"></a>00945 
<a name="l00947"></a>00947 + (UIColor *)colorFromCssValues:(NSArray *)cssValues numberOfConsumedTokens:(NSInteger *)pNumberOfConsumedTokens {
<a name="l00948"></a>00948   NSInteger bogus = 0;
<a name="l00949"></a>00949   <span class="keywordflow">if</span> (nil == pNumberOfConsumedTokens) {
<a name="l00950"></a>00950     pNumberOfConsumedTokens = &amp;bogus;
<a name="l00951"></a>00951   }
<a name="l00952"></a>00952   UIColor* color = nil;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954   <span class="keywordflow">if</span> ([cssValues count] &gt;= 6 &amp;&amp; [[cssValues objectAtIndex:0] isEqualToString:<span class="stringliteral">@&quot;rgba(&quot;</span>]) {
<a name="l00955"></a>00955     <span class="comment">// rgba( x x x x )</span>
<a name="l00956"></a>00956     color = <a class="code" href="group___preprocessor-_macros.html#ga4daacba7f109faac091a582ab498d188" title="Creates a UIColor object from a byte-value color definition and alpha transparency.">RGBACOLOR</a>([[cssValues objectAtIndex:1] floatValue],
<a name="l00957"></a>00957                       [[cssValues objectAtIndex:2] floatValue],
<a name="l00958"></a>00958                       [[cssValues objectAtIndex:3] floatValue],
<a name="l00959"></a>00959                       [[cssValues objectAtIndex:4] floatValue]);
<a name="l00960"></a>00960     *pNumberOfConsumedTokens = 6;
<a name="l00961"></a>00961 
<a name="l00962"></a>00962   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([cssValues count] &gt;= 5 &amp;&amp; [[cssValues objectAtIndex:0] isEqualToString:<span class="stringliteral">@&quot;rgb(&quot;</span>]) {
<a name="l00963"></a>00963     <span class="comment">// rgb( x x x )</span>
<a name="l00964"></a>00964     color = <a class="code" href="group___preprocessor-_macros.html#ga8c95497c3ba480b658024236df4e5dc9" title="Creates an opaque UIColor object from a byte-value color definition.">RGBCOLOR</a>([[cssValues objectAtIndex:1] floatValue],
<a name="l00965"></a>00965                      [[cssValues objectAtIndex:2] floatValue],
<a name="l00966"></a>00966                      [[cssValues objectAtIndex:3] floatValue]);
<a name="l00967"></a>00967     *pNumberOfConsumedTokens = 5;
<a name="l00968"></a>00968     
<a name="l00969"></a>00969   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([cssValues count] &gt;= 1) {
<a name="l00970"></a>00970     <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* cssString = [cssValues objectAtIndex:0];
<a name="l00971"></a>00971 
<a name="l00972"></a>00972     <span class="keywordflow">if</span> ([cssString characterAtIndex:0] == <span class="charliteral">&#39;#&#39;</span>) {
<a name="l00973"></a>00973       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> colorValue = 0;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975       <span class="comment">// #FFF</span>
<a name="l00976"></a>00976       <span class="keywordflow">if</span> ([cssString length] == 4) {
<a name="l00977"></a>00977         colorValue = strtol([cssString UTF8String] + 1, nil, 16);
<a name="l00978"></a>00978         colorValue = ((colorValue &amp; 0xF00) &lt;&lt; 12) | ((colorValue &amp; 0xF00) &lt;&lt; 8)
<a name="l00979"></a>00979         | ((colorValue &amp; 0xF0) &lt;&lt; 8) | ((colorValue &amp; 0xF0) &lt;&lt; 4)
<a name="l00980"></a>00980         | ((colorValue &amp; 0xF) &lt;&lt; 4) | (colorValue &amp; 0xF);
<a name="l00981"></a>00981 
<a name="l00982"></a>00982       <span class="comment">// #FFFFFF</span>
<a name="l00983"></a>00983       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([cssString length] == 7) {
<a name="l00984"></a>00984         colorValue = strtol([cssString UTF8String] + 1, nil, 16);
<a name="l00985"></a>00985       }
<a name="l00986"></a>00986 
<a name="l00987"></a>00987       color = <a class="code" href="group___preprocessor-_macros.html#ga8c95497c3ba480b658024236df4e5dc9" title="Creates an opaque UIColor object from a byte-value color definition.">RGBCOLOR</a>(((colorValue &amp; 0xFF0000) &gt;&gt; 16),
<a name="l00988"></a>00988                        ((colorValue &amp; 0xFF00) &gt;&gt; 8),
<a name="l00989"></a>00989                        (colorValue &amp; 0xFF));
<a name="l00990"></a>00990 
<a name="l00991"></a>00991     } <span class="keywordflow">else</span> {
<a name="l00992"></a>00992       color = [[<span class="keyword">self</span> colorTable] objectForKey:cssString];
<a name="l00993"></a>00993     }
<a name="l00994"></a>00994 
<a name="l00995"></a>00995     *pNumberOfConsumedTokens = 1;
<a name="l00996"></a>00996   }
<a name="l00997"></a>00997   <span class="keywordflow">return</span> color;
<a name="l00998"></a>00998 }
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 
<a name="l01002"></a>01002 + (UITextAlignment)textAlignmentFromCssValues:(NSArray *)cssValues {
<a name="l01003"></a>01003   NIDASSERT([cssValues count] == 1);
<a name="l01004"></a>01004   <span class="keywordflow">if</span> ([cssValues count] &lt; 1) {
<a name="l01005"></a>01005     <span class="keywordflow">return</span> UITextAlignmentLeft;
<a name="l01006"></a>01006   }
<a name="l01007"></a>01007 
<a name="l01008"></a>01008   <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* value = [cssValues objectAtIndex:0];
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   UITextAlignment <a class="code" href="interface_n_i_c_s_s_ruleset.html#ae1e73ede4e4642d665d4375f2ffa83d5" title="Returns the text alignment.">textAlignment</a> = UITextAlignmentLeft;
<a name="l01011"></a>01011   
<a name="l01012"></a>01012   <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;center&quot;</span>]) {
<a name="l01013"></a>01013     textAlignment = UITextAlignmentCenter;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([value isEqualToString:<span class="stringliteral">@&quot;right&quot;</span>]) {
<a name="l01016"></a>01016     textAlignment = UITextAlignmentRight;
<a name="l01017"></a>01017   }
<a name="l01018"></a>01018 
<a name="l01019"></a>01019   <span class="keywordflow">return</span> <a class="code" href="interface_n_i_c_s_s_ruleset.html#ae1e73ede4e4642d665d4375f2ffa83d5" title="Returns the text alignment.">textAlignment</a>;
<a name="l01020"></a>01020 }
<a name="l01021"></a>01021 
<a name="l01022"></a>01022 <span class="keyword">@end</span>
</pre></div><div id="disqus_thread"></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>NICSSRuleset.m</b>      </li>
</div><!-- .fixedwidth -->

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nimbusdocumentation'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


    <span class="footer">Generated for Nimbus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4-20110629 </span>
   </ul>
 </div>


</div> <!-- page -->
</body>
</html>
